{"ast":null,"code":"import _regeneratorRuntime from\"D:/react/remigoo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/react/remigoo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/react/remigoo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./SelectDay.css\";import Button from\"../../Button/Button\";import{useEffect,useState}from'react';import HeaderText from\"../../HeaderText/HeaderText\";import LoadingAnimation from\"../../LoadingAnimation/LoadingAnimation\";import{beautifyMinutes,isDateInPast}from\"../../../utils/utils\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Results=function Results(_ref){var value=_ref.value;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var navigate=useNavigate();var loadData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:3000/get-movies-by-date?date=\".concat(value));case 2:response=_context.sent;console.log(\"http://localhost:3000/get-movies-by-date?date=\".concat(value));response.json().then(function(res){console.log(\"Response: \",res);setData(res);});case 5:case\"end\":return _context.stop();}}},_callee);}));return function loadData(){return _ref2.apply(this,arguments);};}();var RedirectToBooking=function RedirectToBooking(id){navigate(\"/book/\".concat(id,\"&date=\").concat(value));};useEffect(function(){setData({});loadData();return function(){};},[value]);// if(isDateInPast(value))\n//     return <p>date is in past</p>\nif(data.content){if(!data.error){return/*#__PURE__*/_jsx(_Fragment,{children:data.content.map(function(movie){var times;try{times=movie.time.split(', ');}catch(_unused){times=[movie.time];}return/*#__PURE__*/_jsxs(\"div\",{className:\"selectDay-movie\",children:[/*#__PURE__*/_jsx(\"img\",{src:movie.img,alt:\"img-of-\".concat(movie.title)}),/*#__PURE__*/_jsxs(\"div\",{className:\"selectDay-movie-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[movie.title,\" (\",movie.year,\")\"]}),/*#__PURE__*/_jsx(Button,{text:\"Book now\",event:function event(){RedirectToBooking(movie.id);}}),/*#__PURE__*/_jsxs(\"p\",{children:[movie.genre,/*#__PURE__*/_jsx(\"br\",{}),beautifyMinutes(movie.duration)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"selectDay-movie-hours\",children:/*#__PURE__*/_jsx(\"ul\",{children:times.map(function(time){return/*#__PURE__*/_jsx(\"li\",{children:time},\"movie-\".concat(movie.title,\"-time-\").concat(time));})})})]},\"movie-by-date-\"+movie.title);})});}else return/*#__PURE__*/_jsx(\"p\",{children:\"There are no movies scheduled for the selected date.\"});}else return/*#__PURE__*/_jsx(LoadingAnimation,{});};function SelectDay(){var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),selectedDay=_useState4[0],changeSelectedDay=_useState4[1];return/*#__PURE__*/_jsxs(\"div\",{className:\"selectDay section\",children:[/*#__PURE__*/_jsx(HeaderText,{text:\"Select a day\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",onChange:function onChange(ev){changeSelectedDay(ev.target.value);}}),selectedDay!==''&&/*#__PURE__*/_jsxs(\"div\",{className:\"selectDay-results\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Scheduled movies for \",selectedDay.split('-')[2],\"/\",selectedDay.split('-')[1]]}),/*#__PURE__*/_jsx(\"div\",{className:\"selectDay-list-of-results\",children:/*#__PURE__*/_jsx(Results,{value:selectedDay})})]})]});}export default SelectDay;","map":{"version":3,"sources":["D:/react/remigoo/src/Components/MainPage/SelectDay/SelectDay.js"],"names":["Button","useEffect","useState","HeaderText","LoadingAnimation","beautifyMinutes","isDateInPast","useNavigate","Results","value","data","setData","navigate","loadData","fetch","response","console","log","json","then","res","RedirectToBooking","id","content","error","map","movie","times","time","split","img","title","year","genre","duration","SelectDay","selectedDay","changeSelectedDay","ev","target"],"mappings":"kZAAA,MAAO,iBAAP,CACA,MAAOA,CAAAA,MAAP,KAAmB,qBAAnB,CACA,OAAQC,SAAR,CAAmBC,QAAnB,KAAkC,OAAlC,CACA,MAAOC,CAAAA,UAAP,KAAuB,6BAAvB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,yCAA7B,CACA,OAAQC,eAAR,CAAyBC,YAAzB,KAA4C,sBAA5C,CACA,OAAQC,WAAR,KAA0B,kBAA1B,C,6IAEA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,MAAW,IAATC,CAAAA,KAAS,MAATA,KAAS,CACvB,cAAwBP,QAAQ,CAAC,EAAD,CAAhC,wCAAOQ,IAAP,eAAaC,OAAb,eAEA,GAAMC,CAAAA,QAAQ,CAAGL,WAAW,EAA5B,CAEA,GAAMM,CAAAA,QAAQ,2FAAG,sKACUC,CAAAA,KAAK,yDAAkDL,KAAlD,EADf,QACPM,QADO,eAEbC,OAAO,CAACC,GAAR,yDAA6DR,KAA7D,GACAM,QAAQ,CAACG,IAAT,GACKC,IADL,CACU,SAAAC,GAAG,CAAE,CACPJ,OAAO,CAACC,GAAR,CAAY,YAAZ,CAAyBG,GAAzB,EACAT,OAAO,CAACS,GAAD,CAAP,CACH,CAJL,EAHa,sDAAH,kBAARP,CAAAA,QAAQ,2CAAd,CAUA,GAAMQ,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACC,EAAD,CAAO,CAC7BV,QAAQ,iBAAUU,EAAV,kBAAqBb,KAArB,EAAR,CACH,CAFD,CAKAR,SAAS,CAAC,UAAI,CACVU,OAAO,CAAC,EAAD,CAAP,CACAE,QAAQ,GACR,MAAO,WAAI,CAAE,CAAb,CACH,CAJQ,CAIP,CAACJ,KAAD,CAJO,CAAT,CAOA;AACA;AAEA,GAAGC,IAAI,CAACa,OAAR,EACI,GAAG,CAACb,IAAI,CAACc,KAAT,CAAe,CAEX,mBAAO,yBACFd,IAAI,CAACa,OAAL,CAAaE,GAAb,CAAiB,SAAAC,KAAK,CAAE,CACrB,GAAIC,CAAAA,KAAJ,CACA,GAAG,CACCA,KAAK,CAAGD,KAAK,CAACE,IAAN,CAAWC,KAAX,CAAiB,IAAjB,CAAR,CACH,CACD,cAAK,CACDF,KAAK,CAAG,CAACD,KAAK,CAACE,IAAP,CAAR,CACH,CACD,mBAAO,aAAK,SAAS,CAAC,iBAAf,wBACH,YAAK,GAAG,CAAEF,KAAK,CAACI,GAAhB,CAAqB,GAAG,kBAAYJ,KAAK,CAACK,KAAlB,CAAxB,EADG,cAGH,aAAK,SAAS,CAAC,sBAAf,wBACI,qBAAIL,KAAK,CAACK,KAAV,MAAmBL,KAAK,CAACM,IAAzB,OADJ,cAEI,KAAC,MAAD,EAAQ,IAAI,CAAC,UAAb,CAAwB,KAAK,CAAE,gBAAI,CAACX,iBAAiB,CAACK,KAAK,CAACJ,EAAP,CAAjB,CAA4B,CAAhE,EAFJ,cAGI,qBAAII,KAAK,CAACO,KAAV,cAAgB,aAAhB,CAAsB5B,eAAe,CAACqB,KAAK,CAACQ,QAAP,CAArC,GAHJ,GAHG,cASH,YAAK,SAAS,CAAC,uBAAf,uBACI,oBAEQP,KAAK,CAACF,GAAN,CAAU,SAAAG,IAAI,qBAAE,oBAA+CA,IAA/C,kBAAkBF,KAAK,CAACK,KAAxB,kBAAsCH,IAAtC,EAAF,EAAd,CAFR,EADJ,EATG,GAAsC,iBAAiBF,KAAK,CAACK,KAA7D,CAAP,CAiBC,CAzBJ,CADE,EAAP,CA8BH,CAhCD,IAkCI,oBAAO,2EAAP,CAnCR,KAqCI,oBAAO,KAAC,gBAAD,IAAP,CAGP,CAtED,CAyEA,QAASI,CAAAA,SAAT,EAAqB,CACjB,eAAwCjC,QAAQ,CAAC,EAAD,CAAhD,yCAAOkC,WAAP,eAAmBC,iBAAnB,eACA,mBACI,aAAK,SAAS,CAAC,mBAAf,wBACI,KAAC,UAAD,EAAY,IAAI,CAAC,cAAjB,EADJ,cAEI,cAAO,IAAI,CAAC,MAAZ,CAAmB,QAAQ,CAAE,kBAACC,EAAD,CAAM,CAACD,iBAAiB,CAACC,EAAE,CAACC,MAAH,CAAU9B,KAAX,CAAjB,CAAmC,CAAvE,EAFJ,CAIQ2B,WAAW,GAAK,EAAhB,eACA,aAAK,SAAS,CAAC,mBAAf,wBACI,8CAA0BA,WAAW,CAACP,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,CAA1B,KAAsDO,WAAW,CAACP,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,CAAtD,GADJ,cAEI,YAAK,SAAS,CAAC,2BAAf,uBACI,KAAC,OAAD,EAAS,KAAK,CAAEO,WAAhB,EADJ,EAFJ,GALR,GADJ,CAeH,CAED,cAAeD,CAAAA,SAAf","sourcesContent":["import \"./SelectDay.css\";\r\nimport Button from \"../../Button/Button\";\r\nimport {useEffect, useState} from 'react';\r\nimport HeaderText from \"../../HeaderText/HeaderText\";\r\nimport LoadingAnimation from \"../../LoadingAnimation/LoadingAnimation\";\r\nimport {beautifyMinutes, isDateInPast} from \"../../../utils/utils\";\r\nimport {useNavigate} from \"react-router-dom\";\r\n\r\nconst Results = ({value})=>{\r\n    const [data, setData] = useState({});\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const loadData = async () =>{\r\n        const response = await fetch(`http://localhost:3000/get-movies-by-date?date=${value}`)\r\n        console.log(`http://localhost:3000/get-movies-by-date?date=${value}`)\r\n        response.json()\r\n            .then(res=>{\r\n                console.log(\"Response: \",res)\r\n                setData(res)\r\n            })\r\n    }\r\n\r\n    const RedirectToBooking = (id) =>{\r\n        navigate(`/book/${id}&date=${value}`)\r\n    }\r\n\r\n\r\n    useEffect(()=>{\r\n        setData({})\r\n        loadData();\r\n        return ()=>{};\r\n    },[value])\r\n\r\n\r\n    // if(isDateInPast(value))\r\n    //     return <p>date is in past</p>\r\n\r\n    if(data.content)\r\n        if(!data.error){\r\n\r\n            return <>\r\n                {data.content.map(movie=>{\r\n                    let times;\r\n                    try{\r\n                        times = movie.time.split(', ')\r\n                    }\r\n                    catch{\r\n                        times = [movie.time]\r\n                    }\r\n                    return <div className=\"selectDay-movie\" key={\"movie-by-date-\"+movie.title}>\r\n                        <img src={movie.img} alt={`img-of-${movie.title}`}/>\r\n\r\n                        <div className=\"selectDay-movie-info\">\r\n                            <p>{movie.title} ({movie.year})</p>\r\n                            <Button text=\"Book now\" event={()=>{RedirectToBooking(movie.id)}}/>\r\n                            <p>{movie.genre}<br/>{beautifyMinutes(movie.duration)}</p>\r\n                        </div>\r\n\r\n                        <div className=\"selectDay-movie-hours\">\r\n                            <ul>\r\n                                {\r\n                                    times.map(time=><li key={`movie-${movie.title}-time-${time}`}>{time}</li>)\r\n                                }\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                    }\r\n                )}\r\n\r\n            </>\r\n        }\r\n        else\r\n            return <p>There are no movies scheduled for the selected date.</p>\r\n    else\r\n        return <LoadingAnimation/>\r\n\r\n\r\n}\r\n\r\n\r\nfunction SelectDay() {\r\n    const [selectedDay,changeSelectedDay] = useState('')\r\n    return (\r\n        <div className=\"selectDay section\">\r\n            <HeaderText text=\"Select a day\"/>\r\n            <input type=\"date\" onChange={(ev)=>{changeSelectedDay(ev.target.value)}}/>\r\n            {\r\n                selectedDay !== '' &&\r\n                <div className=\"selectDay-results\">\r\n                    <h2>Scheduled movies for {selectedDay.split('-')[2]}/{selectedDay.split('-')[1]}</h2>\r\n                    <div className=\"selectDay-list-of-results\">\r\n                        <Results value={selectedDay}/>\r\n                    </div>\r\n                </div>\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SelectDay;\r\n"]},"metadata":{},"sourceType":"module"}