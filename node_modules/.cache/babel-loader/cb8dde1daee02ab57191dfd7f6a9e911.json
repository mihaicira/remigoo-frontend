{"ast":null,"code":"import _regeneratorRuntime from\"D:/react/remigoo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/react/remigoo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{Routes,Route}from\"react-router-dom\";import Navbar from\"./Components/Navbar/Navbar\";import MainPage from\"./Components/MainPage/MainPage\";import PageNotFound from\"./Components/PageNotFound/PageNotFound\";import LoginPage from\"./Components/PageLoginSignup/LoginPage\";import SignupPage from\"./Components/PageLoginSignup/SignupPage\";import PanelPage from\"./Components/PagePanel/PanelPage\";import BookTicketPage from\"./Components/PageBookTicket/BookTicketPage\";import ProfilePage from\"./Components/PageProfile/ProfilePage\";import{useAccountDataUpdate}from\"./Components/AccountContext/AccountProvider\";import{useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function App(){var AccountDataUpdate=useAccountDataUpdate();useEffect(function(){function refresh(){return _refresh.apply(this,arguments);}function _refresh(){_refresh=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var accountData,storageData,userData,response,response_data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;storageData=JSON.parse(localStorage.getItem(\"loginStatus\"));userData=storageData.userData;if(!storageData.isLoggedIn){_context.next=13;break;}_context.next=6;return fetch(\"http://localhost:3000/validate-token?id=\".concat(userData.userId,\"&auth_token=\").concat(userData.token));case 6:response=_context.sent;_context.next=9;return response.json();case 9:response_data=_context.sent;if(!response_data.error){userData.panelAccess=response_data.hasPanelAccess;accountData={isLoggedIn:storageData.isLoggedIn,userData:userData};console.log(\"Successfully logged in!\");}_context.next=15;break;case 13:accountData={isLoggedIn:false};console.log(\"User is not logged in.\");case 15:_context.next=21;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](0);accountData={isLoggedIn:false};console.log(\"User is not logged in.\");case 21:AccountDataUpdate(accountData);case 22:case\"end\":return _context.stop();}}},_callee,null,[[0,17]]);}));return _refresh.apply(this,arguments);}refresh();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",exact:true,element:/*#__PURE__*/_jsx(MainPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",exact:true,element:/*#__PURE__*/_jsx(LoginPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",exact:true,element:/*#__PURE__*/_jsx(SignupPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/panel\",exact:true,element:/*#__PURE__*/_jsx(PanelPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/account\",exact:true,element:/*#__PURE__*/_jsx(ProfilePage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/book/:movieId\",exact:true,element:/*#__PURE__*/_jsx(BookTicketPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(PageNotFound,{})})]})]});}export default App;","map":{"version":3,"sources":["D:/react/remigoo/src/App.js"],"names":["Routes","Route","Navbar","MainPage","PageNotFound","LoginPage","SignupPage","PanelPage","BookTicketPage","ProfilePage","useAccountDataUpdate","useEffect","App","AccountDataUpdate","refresh","storageData","JSON","parse","localStorage","getItem","userData","isLoggedIn","fetch","userId","token","response","json","response_data","error","panelAccess","hasPanelAccess","accountData","console","log"],"mappings":"2QAAA,OAASA,MAAT,CAAiBC,KAAjB,KAA8B,kBAA9B,CACA,MAAOC,CAAAA,MAAP,KAAmB,4BAAnB,CACA,MAAOC,CAAAA,QAAP,KAAqB,gCAArB,CACA,MAAOC,CAAAA,YAAP,KAAyB,wCAAzB,CACA,MAAOC,CAAAA,SAAP,KAAsB,wCAAtB,CACA,MAAOC,CAAAA,UAAP,KAAuB,yCAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,kCAAtB,CACA,MAAOC,CAAAA,cAAP,KAA2B,4CAA3B,CACA,MAAOC,CAAAA,WAAP,KAAwB,sCAAxB,CACA,OAAQC,oBAAR,KAAmC,6CAAnC,CACA,OAAQC,SAAR,KAAwB,OAAxB,C,6IAEA,QAASC,CAAAA,GAAT,EAAe,CAEX,GAAMC,CAAAA,iBAAiB,CAAGH,oBAAoB,EAA9C,CAEAC,SAAS,CAAC,UAAK,SACIG,CAAAA,OADJ,+HACX,+MAIYC,WAJZ,CAI0BC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAX,CAJ1B,CAKcC,QALd,CAKyBL,WAAW,CAACK,QALrC,KAMYL,WAAW,CAACM,UANxB,gDAOmCC,CAAAA,KAAK,mDAA4CF,QAAQ,CAACG,MAArD,wBAA0EH,QAAQ,CAACI,KAAnF,EAPxC,QAOkBC,QAPlB,qCAQwCA,CAAAA,QAAQ,CAACC,IAAT,EARxC,QAQkBC,aARlB,eAUY,GAAI,CAACA,aAAa,CAACC,KAAnB,CAA0B,CACtBR,QAAQ,CAACS,WAAT,CAAuBF,aAAa,CAACG,cAArC,CACAC,WAAW,CAAG,CACVV,UAAU,CAAEN,WAAW,CAACM,UADd,CAEVD,QAAQ,CAAEA,QAFA,CAAd,CAIAY,OAAO,CAACC,GAAR,CAAY,yBAAZ,EACH,CAjBb,+BAmBYF,WAAW,CAAG,CACVV,UAAU,CAAE,KADF,CAAd,CAGAW,OAAO,CAACC,GAAR,CAAY,wBAAZ,EAtBZ,yFAyBQF,WAAW,CAAG,CACVV,UAAU,CAAE,KADF,CAAd,CAGAW,OAAO,CAACC,GAAR,CAAY,wBAAZ,EA5BR,QA+BIpB,iBAAiB,CAACkB,WAAD,CAAjB,CA/BJ,qEADW,0CAmCXjB,OAAO,GACV,CApCQ,CAqCR,EArCQ,CAAT,CAuCF,mBAAQ,wCACG,KAAC,MAAD,IADH,cAEG,MAAC,MAAD,yBACG,KAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,KAAK,KAArB,CAAsB,OAAO,cAAE,KAAC,QAAD,IAA/B,EADH,cAEG,KAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,KAA1B,CAA2B,OAAO,cAAE,KAAC,SAAD,IAApC,EAFH,cAGG,KAAC,KAAD,EAAO,IAAI,CAAC,SAAZ,CAAsB,KAAK,KAA3B,CAA4B,OAAO,cAAE,KAAC,UAAD,IAArC,EAHH,cAIG,KAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,KAA1B,CAA2B,OAAO,cAAE,KAAC,SAAD,IAApC,EAJH,cAKG,KAAC,KAAD,EAAO,IAAI,CAAC,UAAZ,CAAuB,KAAK,KAA5B,CAA6B,OAAO,cAAE,KAAC,WAAD,IAAtC,EALH,cAMG,KAAC,KAAD,EAAO,IAAI,CAAC,gBAAZ,CAA6B,KAAK,KAAlC,CAAmC,OAAO,cAAE,KAAC,cAAD,IAA5C,EANH,cAOG,KAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,OAAO,cAAE,KAAC,YAAD,IAAzB,EAPH,GAFH,GAAR,CAaD,CAED,cAAeF,CAAAA,GAAf","sourcesContent":["import { Routes, Route } from \"react-router-dom\";\nimport Navbar from \"./Components/Navbar/Navbar\";\nimport MainPage from \"./Components/MainPage/MainPage\";\nimport PageNotFound from \"./Components/PageNotFound/PageNotFound\";\nimport LoginPage from \"./Components/PageLoginSignup/LoginPage\";\nimport SignupPage from \"./Components/PageLoginSignup/SignupPage\";\nimport PanelPage from \"./Components/PagePanel/PanelPage\";\nimport BookTicketPage from \"./Components/PageBookTicket/BookTicketPage\";\nimport ProfilePage from \"./Components/PageProfile/ProfilePage\";\nimport {useAccountDataUpdate} from \"./Components/AccountContext/AccountProvider\";\nimport {useEffect} from 'react'\n\nfunction App() {\n\n    const AccountDataUpdate = useAccountDataUpdate()\n\n    useEffect(()=> {\n        async function refresh() {\n            var accountData;\n\n            try {\n                let storageData = JSON.parse(localStorage.getItem(\"loginStatus\"))\n                const userData = storageData.userData\n                if (storageData.isLoggedIn) {\n                    const response = await fetch(`http://localhost:3000/validate-token?id=${userData.userId}&auth_token=${userData.token}`)\n                    const response_data = await response.json()\n\n                    if (!response_data.error) {\n                        userData.panelAccess = response_data.hasPanelAccess\n                        accountData = {\n                            isLoggedIn: storageData.isLoggedIn,\n                            userData: userData\n                        }\n                        console.log(\"Successfully logged in!\")\n                    }\n                } else {\n                    accountData = {\n                        isLoggedIn: false\n                    }\n                    console.log(\"User is not logged in.\")\n                }\n            } catch {\n                accountData = {\n                    isLoggedIn: false\n                }\n                console.log(\"User is not logged in.\")\n            }\n\n            AccountDataUpdate(accountData)\n        }\n\n        refresh()\n    }\n    ,[])\n\n  return (<>\n             <Navbar/>\n             <Routes>\n                <Route path=\"/\" exact element={<MainPage/>}/>\n                <Route path=\"/login\" exact element={<LoginPage/>}/>\n                <Route path=\"/signup\" exact element={<SignupPage/>}/>\n                <Route path=\"/panel\" exact element={<PanelPage/>}/>\n                <Route path=\"/account\" exact element={<ProfilePage/>}/>\n                <Route path=\"/book/:movieId\" exact element={<BookTicketPage/>}/>\n                <Route path=\"*\" element={<PageNotFound/>}/>\n             </Routes>\n    </>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}