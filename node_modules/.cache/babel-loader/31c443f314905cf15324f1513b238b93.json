{"ast":null,"code":"import _regeneratorRuntime from\"D:/react/remigoo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/react/remigoo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/react/remigoo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./LoginSignup.css\";import Button from\"../Button/Button\";import{useState,useEffect}from'react';import{Link,useNavigate}from\"react-router-dom\";import{popUpError,LoginRequest}from'../../utils/utils.js';import{useAccountData,useAccountDataUpdate}from\"../AccountContext/AccountProvider\";import{sha256}from'js-sha256';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginPage(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),inputEmail=_useState4[0],changeInputEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),inputPassword=_useState6[0],changeInputPassword=_useState6[1];var AccountDataUpdate=useAccountDataUpdate();var AccountData=useAccountData();var navigate=useNavigate();useEffect(function(){if(AccountData.isLoggedIn)navigate('/');},[]);var handleForm=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();// changeInputEmail(\"mihai12@yahoo.com\")\n// changeInputPassword(\"kaka\")\n//complete all fields\nif(!(inputEmail===''||inputPassword==='')){_context.next=5;break;}setError(\"Complete all fields.\");popUpError();return _context.abrupt(\"return\");case 5:_context.next=7;return LoginRequest({email:inputEmail,password:sha256(inputPassword)});case 7:response=_context.sent;if(!response.error){_context.next=12;break;}setError(response.content);popUpError();return _context.abrupt(\"return\");case 12:AccountDataUpdate({isLoggedIn:true,userData:{userId:response.content.userId,userName:response.content.userName,userEmail:response.content.userEmail,token:response.content.token}});//redirect to Home\nnavigate(\"/\");case 14:case\"end\":return _context.stop();}}},_callee);}));return function handleForm(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"login-signup-form-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"email\",required:true,onChange:function onChange(e){changeInputEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"password\",required:true,onChange:function onChange(e){changeInputPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"p\",{id:\"account-error\",children:error}),/*#__PURE__*/_jsx(Button,{text:\"Login\",event:handleForm}),/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Create an account\"})]})]});}export default LoginPage;","map":{"version":3,"sources":["D:/react/remigoo/src/Components/PageLoginSignup/LoginPage.js"],"names":["Button","useState","useEffect","Link","useNavigate","popUpError","LoginRequest","useAccountData","useAccountDataUpdate","sha256","LoginPage","error","setError","inputEmail","changeInputEmail","inputPassword","changeInputPassword","AccountDataUpdate","AccountData","navigate","isLoggedIn","handleForm","e","preventDefault","email","password","response","content","userData","userId","userName","userEmail","token","target","value"],"mappings":"kZAAA,MAAO,mBAAP,CACA,MAAOA,CAAAA,MAAP,KAAmB,kBAAnB,CACA,OAAQC,QAAR,CAAiBC,SAAjB,KAAiC,OAAjC,CACA,OAAQC,IAAR,CAAaC,WAAb,KAA+B,kBAA/B,CACA,OAAQC,UAAR,CAAmBC,YAAnB,KAAsC,sBAAtC,CACA,OAAQC,cAAR,CAAwBC,oBAAxB,KAAmD,mCAAnD,CACA,OAASC,MAAT,KAAuB,WAAvB,C,wFAEA,QAASC,CAAAA,SAAT,EAAqB,CACjB,cAAyBT,QAAQ,CAAC,EAAD,CAAjC,wCAAOU,KAAP,eAAaC,QAAb,eACA,eAAsCX,QAAQ,CAAC,EAAD,CAA9C,yCAAOY,UAAP,eAAkBC,gBAAlB,eACA,eAA4Cb,QAAQ,CAAC,EAAD,CAApD,yCAAOc,aAAP,eAAqBC,mBAArB,eAEA,GAAMC,CAAAA,iBAAiB,CAAGT,oBAAoB,EAA9C,CACA,GAAMU,CAAAA,WAAW,CAAGX,cAAc,EAAlC,CACA,GAAMY,CAAAA,QAAQ,CAAGf,WAAW,EAA5B,CAEAF,SAAS,CAAC,UAAI,CACV,GAAGgB,WAAW,CAACE,UAAf,CACID,QAAQ,CAAC,GAAD,CAAR,CACP,CAHQ,CAGP,EAHO,CAAT,CAQA,GAAME,CAAAA,UAAU,0FAAG,iBAAOC,CAAP,+HACfA,CAAC,CAACC,cAAF,GAEA;AACA;AAEA;AANe,KAOXV,UAAU,GAAK,EAAf,EAAqBE,aAAa,GAAK,EAP5B,0BAQXH,QAAQ,CAAC,sBAAD,CAAR,CACAP,UAAU,GATC,8DAaQC,CAAAA,YAAY,CAAC,CAChCkB,KAAK,CAAEX,UADyB,CAEhCY,QAAQ,CAAEhB,MAAM,CAACM,aAAD,CAFgB,CAAD,CAbpB,QAaTW,QAbS,mBAkBXA,QAAQ,CAACf,KAlBE,0BAmBXC,QAAQ,CAACc,QAAQ,CAACC,OAAV,CAAR,CACAtB,UAAU,GApBC,yCAwBfY,iBAAiB,CAAC,CACdG,UAAU,CAAE,IADE,CAEdQ,QAAQ,CAAE,CACNC,MAAM,CAAEH,QAAQ,CAACC,OAAT,CAAiBE,MADnB,CAENC,QAAQ,CAAEJ,QAAQ,CAACC,OAAT,CAAiBG,QAFrB,CAGNC,SAAS,CAAEL,QAAQ,CAACC,OAAT,CAAiBI,SAHtB,CAINC,KAAK,CAAEN,QAAQ,CAACC,OAAT,CAAiBK,KAJlB,CAFI,CAAD,CAAjB,CAUA;AACAb,QAAQ,CAAC,GAAD,CAAR,CAnCe,uDAAH,kBAAVE,CAAAA,UAAU,4CAAhB,CAwCA,mBACI,aAAK,SAAS,CAAC,6BAAf,wBAEI,6BAFJ,cAGI,qCACI,wCADJ,cAEI,cAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,OAA/B,CAAuC,QAAQ,KAA/C,CAAgD,QAAQ,CAAE,kBAACC,CAAD,CAAK,CAACR,gBAAgB,CAACQ,CAAC,CAACW,MAAF,CAASC,KAAV,CAAhB,CAAiC,CAAjG,EAFJ,cAII,mCAJJ,cAKI,cAAO,IAAI,CAAC,UAAZ,CAAuB,WAAW,CAAC,UAAnC,CAA8C,QAAQ,KAAtD,CAAuD,QAAQ,CAAE,kBAACZ,CAAD,CAAK,CAACN,mBAAmB,CAACM,CAAC,CAACW,MAAF,CAASC,KAAV,CAAnB,CAAoC,CAA3G,EALJ,cAOI,UAAG,EAAE,CAAC,eAAN,UAAuBvB,KAAvB,EAPJ,cASI,KAAC,MAAD,EAAQ,IAAI,CAAC,OAAb,CAAqB,KAAK,CAAEU,UAA5B,EATJ,cAWI,KAAC,IAAD,EAAM,EAAE,CAAC,SAAT,+BAXJ,GAHJ,GADJ,CAoBH,CAED,cAAeX,CAAAA,SAAf","sourcesContent":["import \"./LoginSignup.css\";\r\nimport Button from \"../Button/Button\";\r\nimport {useState,useEffect} from 'react';\r\nimport {Link,useNavigate} from \"react-router-dom\";\r\nimport {popUpError,LoginRequest} from '../../utils/utils.js'\r\nimport {useAccountData, useAccountDataUpdate} from \"../AccountContext/AccountProvider\";\r\nimport { sha256 } from 'js-sha256';\r\n\r\nfunction LoginPage() {\r\n    const [error,setError] = useState(\"\")\r\n    const [inputEmail,changeInputEmail] = useState(\"\")\r\n    const [inputPassword,changeInputPassword] = useState(\"\")\r\n\r\n    const AccountDataUpdate = useAccountDataUpdate()\r\n    const AccountData = useAccountData()\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(()=>{\r\n        if(AccountData.isLoggedIn)\r\n            navigate('/')\r\n    },[])\r\n\r\n\r\n\r\n\r\n    const handleForm = async (e)=> {\r\n        e.preventDefault();\r\n\r\n        // changeInputEmail(\"mihai12@yahoo.com\")\r\n        // changeInputPassword(\"kaka\")\r\n\r\n        //complete all fields\r\n        if (inputEmail === '' || inputPassword === '') {\r\n            setError(\"Complete all fields.\")\r\n            popUpError()\r\n            return;\r\n        }\r\n\r\n        const response = await LoginRequest({\r\n            email: inputEmail,\r\n            password: sha256(inputPassword)\r\n        })\r\n\r\n        if (response.error) {\r\n            setError(response.content)\r\n            popUpError()\r\n            return;\r\n        }\r\n\r\n        AccountDataUpdate({\r\n            isLoggedIn: true,\r\n            userData: {\r\n                userId: response.content.userId,\r\n                userName: response.content.userName,\r\n                userEmail: response.content.userEmail,\r\n                token: response.content.token\r\n            }\r\n        })\r\n\r\n        //redirect to Home\r\n        navigate(\"/\");\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"login-signup-form-container\">\r\n\r\n            <h2>Login</h2>\r\n            <form>\r\n                <label>Email address</label>\r\n                <input type=\"text\" placeholder=\"email\" required onChange={(e)=>{changeInputEmail(e.target.value)}}/>\r\n\r\n                <label>Password</label>\r\n                <input type=\"password\" placeholder=\"password\" required onChange={(e)=>{changeInputPassword(e.target.value)}}/>\r\n\r\n                <p id=\"account-error\">{error}</p>\r\n\r\n                <Button text=\"Login\" event={handleForm}/>\r\n\r\n                <Link to=\"/signup\">Create an account</Link>\r\n\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default LoginPage;\r\n"]},"metadata":{},"sourceType":"module"}