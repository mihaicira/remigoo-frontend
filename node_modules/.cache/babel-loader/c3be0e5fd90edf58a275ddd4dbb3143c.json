{"ast":null,"code":"import _toConsumableArray from\"D:/react/remigoo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import\"./SelectTickets.css\";import BackArrow from\"../../../assets/back-arrow.svg\";import ContinueArrow from\"../../../assets/continue-arrow.svg\";import WasteBasket from\"../../../assets/waste-basket.svg\";import Button from\"../../Button/Button\";import{useAccountData}from'../../AccountContext/AccountProvider';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function areAllTicketsCompleted(tickets){var atLeastOneName=false;var pass=true;tickets.forEach(function(ticket){if(ticket.type===\"DEFAULT\"){pass=false;return;}if(ticket.name!==\"\"){atLeastOneName=true;}});return pass&&atLeastOneName;}function SelectTickets(props){var AccountData=useAccountData();var deleteTicket=function deleteTicket(id){props.changeTicketList(props.ticketList.filter(function(ticket){return ticket.id!==id;}));};var ownerTicketHandler=function ownerTicketHandler(value){var tempList=_toConsumableArray(props.ticketList);if(value)tempList.unshift({owner:true,id:AccountData.userData.userId,name:AccountData.userData.userName,type:null});else tempList.shift();props.changeTicketList(tempList);};var changeTicketDataHandler=function changeTicketDataHandler(ticket_id,field,value){var tempTickets=_toConsumableArray(props.ticketList);var index=tempTickets.findIndex(function(ticket){return ticket.id===ticket_id;});tempTickets[index][field]=value;props.changeTicketList(tempTickets);};var addTicketHandler=function addTicketHandler(){var tempList=_toConsumableArray(props.ticketList);var key=\"T-\"+new Date().getTime();tempList.push({owner:false,id:key,name:\"\",type:\"DEFAULT\"});props.changeTicketList(tempList);};var goBackwardsHandler=function goBackwardsHandler(){props.changeTicketList([]);props.backwards();};return/*#__PURE__*/_jsxs(\"div\",{className:\"book-page-container\",children:[props.DBMovie&&/*#__PURE__*/_jsx(\"h2\",{children:props.DBMovie.movie.title}),/*#__PURE__*/_jsx(\"h3\",{children:\"Book your tickets\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"price-list\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Price list\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Standard ......... 3\\u20AC\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Child (< 14 years old) ......... 3\\u20AC\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Student ......... \\u20ACe\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Pensionary ......... 3\\u20AC\"})]}),AccountData&&AccountData.isLoggedIn&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onChange:function onChange(e){ownerTicketHandler(e.target.checked);},id:\"owner-checkbox\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"owner-checkbox\",children:\"Check this box if there is one ticket for the person who is owning this account\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tickets-container\",children:[props.ticketList.map(function(ticket,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"ticket\",children:[!ticket.owner&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:index===0?\"Mandatory\":\"Optional\",onChange:function onChange(e){changeTicketDataHandler(ticket.id,\"name\",e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Type:\"}),/*#__PURE__*/_jsxs(\"select\",{type:\"text\",defaultValue:\"DEFAULT\",onChange:function onChange(e){changeTicketDataHandler(ticket.id,\"type\",e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"DEFAULT\",disabled:true,style:{color:\"black\",fontWeight:\"bold\"},children:\"Select ticket\"}),/*#__PURE__*/_jsx(\"option\",{value:\"standard\",children:\"Standard\"}),/*#__PURE__*/_jsx(\"option\",{value:\"child\",children:\"Child (<14 y/o)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"student\",children:\"Student\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pensionary\",children:\"Pensionary\"})]})]}),/*#__PURE__*/_jsx(\"img\",{src:WasteBasket,alt:\"waste-basket\",onClick:function onClick(){deleteTicket(ticket.id);}})]}),ticket.owner&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Name: \",ticket.name,\" (account owner)\"]})})]},ticket.id);}),/*#__PURE__*/_jsx(Button,{text:\"Add new ticket\",event:function event(){addTicketHandler();}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:BackArrow,alt:\"back-arrow\",onClick:goBackwardsHandler}),/*#__PURE__*/_jsx(\"img\",{src:ContinueArrow,alt:\"continue-arrow\",className:areAllTicketsCompleted(props.ticketList)?\"\":\"disabled-book-btn\",onClick:props.forward})]})]});}export default SelectTickets;","map":{"version":3,"sources":["D:/react/remigoo/src/Components/PageBookTicket/SelectTickets/SelectTickets.js"],"names":["Button","useAccountData","areAllTicketsCompleted","tickets","atLeastOneName","pass","forEach","ticket","type","name","SelectTickets","props","AccountData","deleteTicket","id","changeTicketList","ticketList","filter","ownerTicketHandler","value","tempList","unshift","owner","userData","userId","userName","shift","changeTicketDataHandler","ticket_id","field","tempTickets","index","findIndex","addTicketHandler","key","Date","getTime","push","goBackwardsHandler","backwards","DBMovie","movie","title","isLoggedIn","e","target","checked","map","color","fontWeight","WasteBasket","BackArrow","ContinueArrow","forward"],"mappings":"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","sourcesContent":["import \"./SelectTickets.css\";\r\nimport BackArrow from \"../../../assets/back-arrow.svg\";\r\nimport ContinueArrow from \"../../../assets/continue-arrow.svg\";\r\nimport WasteBasket from \"../../../assets/waste-basket.svg\";\r\nimport Button from \"../../Button/Button\";\r\nimport {useAccountData} from '../../AccountContext/AccountProvider';\r\n\r\nfunction areAllTicketsCompleted(tickets){\r\n    let atLeastOneName = false\r\n    let pass = true\r\n    tickets.forEach((ticket)=>{\r\n        if(ticket.type===\"DEFAULT\"){\r\n            pass = false;\r\n            return;\r\n        }\r\n        if(ticket.name!==\"\"){\r\n            atLeastOneName = true\r\n        }\r\n    })\r\n    return (pass && atLeastOneName)\r\n}\r\n\r\nfunction SelectTickets(props) {\r\n    const AccountData = useAccountData()\r\n\r\n    const deleteTicket = (id) =>{\r\n        props.changeTicketList(props.ticketList.filter(ticket=>ticket.id!==id))\r\n    }\r\n\r\n    const ownerTicketHandler = (value) =>{\r\n        let tempList = [...props.ticketList]\r\n        if(value)\r\n            tempList.unshift({\r\n                owner:true,\r\n                id: AccountData.userData.userId,\r\n                name:AccountData.userData.userName,\r\n                type:null\r\n            })\r\n        else\r\n            tempList.shift()\r\n\r\n        props.changeTicketList(tempList)\r\n    }\r\n\r\n    const changeTicketDataHandler = (ticket_id,field,value) =>{\r\n        let tempTickets = [...props.ticketList]\r\n        let index = tempTickets.findIndex(ticket => ticket.id===ticket_id)\r\n        tempTickets[index][field] = value\r\n        props.changeTicketList(tempTickets)\r\n    }\r\n\r\n    const addTicketHandler = () => {\r\n        let tempList = [...props.ticketList]\r\n        let key = \"T-\" + new Date().getTime()\r\n\r\n        tempList.push({\r\n            owner:false,\r\n            id: key,\r\n            name:\"\",\r\n            type:\"DEFAULT\"\r\n        })\r\n\r\n        props.changeTicketList(tempList)\r\n    }\r\n\r\n    const goBackwardsHandler = () =>{\r\n        props.changeTicketList([])\r\n        props.backwards()\r\n    }\r\n\r\n    return (\r\n        <div className=\"book-page-container\">\r\n            {\r\n                props.DBMovie && <h2>{props.DBMovie.movie.title}</h2>\r\n            }\r\n\r\n            <h3>Book your tickets</h3>\r\n\r\n            <div className=\"price-list\">\r\n                <p>Price list</p>\r\n                <p>Standard ......... 3€</p>\r\n                <p>Child (&lt; 14 years old) ......... 3€</p>\r\n                <p>Student ......... €e</p>\r\n                <p>Pensionary ......... 3€</p>\r\n            </div>\r\n\r\n            {\r\n                (AccountData && AccountData.isLoggedIn) &&\r\n                <div>\r\n                    <input type=\"checkbox\" onChange={(e)=>{ownerTicketHandler(e.target.checked)}} id=\"owner-checkbox\"/>\r\n                    <label htmlFor=\"owner-checkbox\">Check this box if there is one ticket for the person who is owning this account</label>\r\n                </div>\r\n            }\r\n\r\n\r\n            <div className=\"tickets-container\">\r\n                {  props.ticketList.map((ticket,index)=>{\r\n                    return(<div key={ticket.id} className=\"ticket\">\r\n                        {!ticket.owner &&\r\n                            <>\r\n                                <div>\r\n                                    <span>Name:</span>\r\n                                    <input type=\"text\" placeholder={index===0 ? \"Mandatory\" : \"Optional\"} onChange={(e)=>{changeTicketDataHandler(ticket.id,\"name\",e.target.value)}}/>\r\n                                </div>\r\n\r\n                                <div>\r\n                                <span>Type:</span>\r\n                                <select type=\"text\" defaultValue={\"DEFAULT\"} onChange={(e)=>{changeTicketDataHandler(ticket.id,\"type\",e.target.value)}}>\r\n                                <option value=\"DEFAULT\" disabled style={{color: \"black\", fontWeight: \"bold\"}}>Select ticket</option>\r\n                                <option value=\"standard\">Standard</option>\r\n                                <option value=\"child\">Child (&lt;14 y/o)</option>\r\n                                <option value=\"student\">Student</option>\r\n                                <option value=\"pensionary\">Pensionary</option>\r\n                                </select>\r\n                                </div>\r\n\r\n                                <img src={WasteBasket} alt=\"waste-basket\" onClick={()=>{deleteTicket(ticket.id)}}/>\r\n                            </>\r\n                        }\r\n                        {\r\n                            ticket.owner &&\r\n                            <div>\r\n                                <span>Name: {ticket.name} (account owner)</span>\r\n                            </div>\r\n                        }\r\n\r\n                    </div>)\r\n                })\r\n                }\r\n\r\n                <Button text=\"Add new ticket\" event={()=>{addTicketHandler()}}/>\r\n            </div>\r\n\r\n            <div className=\"buttons-container\">\r\n                <img src={BackArrow} alt=\"back-arrow\" onClick={goBackwardsHandler}/>\r\n                <img src={ContinueArrow} alt=\"continue-arrow\" className={areAllTicketsCompleted(props.ticketList)? \"\" : \"disabled-book-btn\"} onClick={props.forward}/>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SelectTickets;\r\n"]},"metadata":{},"sourceType":"module"}