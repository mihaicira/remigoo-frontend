{"ast":null,"code":"import _regeneratorRuntime from\"D:/react/remigoo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/react/remigoo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/react/remigoo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./BookTicketPage.css\";import{useState,useEffect}from'react';import DateTime from\"./DateTime/DateTime\";import SelectTickets from\"./SelectTickets/SelectTickets\";import ChooseSeats from\"./ChooseSeats/ChooseSeats\";import Ticket from\"./Ticket/Ticket\";import{Link,useParams,useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function BookTicketPage(){var _useState=useState(1),_useState2=_slicedToArray(_useState,2),page=_useState2[0],changePage=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),scheduleId=_useState4[0],setScheduleId=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),schedule=_useState6[0],setSchedule=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),day=_useState8[0],setDay=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),hour=_useState10[0],setHour=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),ticketList=_useState12[0],changeTicketList=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),selectedSeats=_useState14[0],changeSelectedSeats=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),DBMovie=_useState16[0],setDBMovie=_useState16[1];var location=useParams();var loadData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var movie_id,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:movie_id=location.movieId.split(\"&\")[0];_context.next=3;return fetch(\"http://localhost:3000/get-movies-by-id?id=\".concat(movie_id));case 3:response=_context.sent;response.json().then(function(res){setDBMovie(res.content);console.log(res.content);});case 5:case\"end\":return _context.stop();}}},_callee);}));return function loadData(){return _ref.apply(this,arguments);};}();useEffect(function(){loadData();var urlDate;try{urlDate=window.location.search.split('=')[1];if(urlDate)setDay(urlDate);}catch(_unused){//pass\n}},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[page===1&&/*#__PURE__*/_jsx(DateTime,{forward:function forward(){changePage(2);},selectedDay:day,changeSelectedDay:setDay,selectedHour:hour,changeSelectedHour:setHour,schedule:scheduleId,setScheduleId:setScheduleId,DBMovie:DBMovie}),page===2&&/*#__PURE__*/_jsx(SelectTickets,{backwards:function backwards(){changePage(1);},forward:function forward(){changePage(3);},ticketList:ticketList,changeTicketList:changeTicketList,DBMovie:DBMovie}),page===3&&/*#__PURE__*/_jsx(ChooseSeats,{backwards:function backwards(){changePage(2);},forward:function forward(){changePage(4);},numberOfTickets:ticketList.length,selectedSeats:selectedSeats,changeSelectedSeats:changeSelectedSeats,scheduleId:scheduleId,schedule:schedule,setSchedule:setSchedule,DBMovie:DBMovie}),page===4&&/*#__PURE__*/_jsx(Ticket,{tickets:ticketList,DBMovie:DBMovie})]});}export default BookTicketPage;","map":{"version":3,"sources":["D:/react/remigoo/src/Components/PageBookTicket/BookTicketPage.js"],"names":["useState","useEffect","DateTime","SelectTickets","ChooseSeats","Ticket","Link","useParams","useNavigate","BookTicketPage","page","changePage","scheduleId","setScheduleId","schedule","setSchedule","day","setDay","hour","setHour","ticketList","changeTicketList","selectedSeats","changeSelectedSeats","DBMovie","setDBMovie","location","loadData","movie_id","movieId","split","fetch","response","json","then","res","content","console","log","urlDate","window","search","length"],"mappings":"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","sourcesContent":["import \"./BookTicketPage.css\";\r\nimport {useState,useEffect} from 'react';\r\nimport DateTime from \"./DateTime/DateTime\";\r\nimport SelectTickets from \"./SelectTickets/SelectTickets\";\r\nimport ChooseSeats from \"./ChooseSeats/ChooseSeats\";\r\nimport Ticket from \"./Ticket/Ticket\";\r\nimport {Link, useParams, useNavigate} from \"react-router-dom\";\r\n\r\nfunction BookTicketPage() {\r\n\r\n    const [page,changePage] = useState(1)\r\n\r\n    const [scheduleId,setScheduleId] = useState(\"\")\r\n    const [schedule,setSchedule] = useState(null)\r\n\r\n    const [day,setDay] = useState(\"\")\r\n    const [hour,setHour] = useState(\"\")\r\n    const [ticketList,changeTicketList] = useState([])\r\n    const [selectedSeats,changeSelectedSeats] = useState([])\r\n\r\n    const [DBMovie,setDBMovie] = useState(null)\r\n    const location = useParams()\r\n\r\n    const loadData = async () =>{\r\n        let movie_id = location.movieId.split(\"&\")[0]\r\n        const response = await fetch(`http://localhost:3000/get-movies-by-id?id=${movie_id}`)\r\n        response.json()\r\n            .then(res=>{\r\n                setDBMovie(res.content)\r\n                console.log(res.content)\r\n            })\r\n    }\r\n\r\n    useEffect(()=>{\r\n        loadData()\r\n\r\n        let urlDate;\r\n        try{\r\n            urlDate =  window.location.search.split('=')[1]\r\n            if(urlDate)\r\n                setDay(urlDate);\r\n        }\r\n        catch{\r\n           //pass\r\n        }\r\n\r\n    },[])\r\n\r\n\r\n\r\n    return (\r\n        <>\r\n            {/*<h1> dw{movie.title}</h1>*/}\r\n            {\r\n                page === 1 &&\r\n                <DateTime forward={()=>{changePage(2)}}\r\n                          selectedDay={day}\r\n                          changeSelectedDay={setDay}\r\n                          selectedHour={hour}\r\n                          changeSelectedHour={setHour}\r\n                          schedule={scheduleId}\r\n                          setScheduleId={setScheduleId}\r\n                          DBMovie={DBMovie}/>\r\n            }\r\n\r\n            {\r\n                page === 2 &&\r\n                <SelectTickets\r\n                    backwards={()=>{changePage(1)}}\r\n                    forward={()=>{changePage(3)}}\r\n                    ticketList={ticketList}\r\n                    changeTicketList={changeTicketList}\r\n                    DBMovie={DBMovie}/>\r\n            }\r\n\r\n            {\r\n                page === 3 &&\r\n                <ChooseSeats\r\n                    backwards={()=>{changePage(2)}}\r\n                    forward={()=>{changePage(4)}}\r\n                    numberOfTickets={ticketList.length}\r\n                    selectedSeats={selectedSeats}\r\n                    changeSelectedSeats={changeSelectedSeats}\r\n                    scheduleId={scheduleId}\r\n                    schedule={schedule}\r\n                    setSchedule={setSchedule}\r\n                    DBMovie={DBMovie}/>\r\n            }\r\n\r\n            {\r\n                page === 4 &&\r\n                    <Ticket\r\n                        tickets={ticketList}\r\n                        DBMovie={DBMovie}/>\r\n            }\r\n\r\n        </>\r\n    );\r\n}\r\n\r\nexport default BookTicketPage;\r\n"]},"metadata":{},"sourceType":"module"}