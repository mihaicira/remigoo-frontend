{"ast":null,"code":"import _regeneratorRuntime from\"D:/react/remigoo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/react/remigoo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/react/remigoo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./SearchMovie.css\";import ExampleImage from\"../../../assets/example-movie-image.jpg\";import{beautifyMinutes,monthNumberToString}from\"../../../utils/utils\";import Button from\"../../Button/Button\";import LoadingAnimation from\"../../LoadingAnimation/LoadingAnimation\";import{useEffect,useState}from'react';import HeaderText from\"../../HeaderText/HeaderText\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Results=function Results(_ref){var value=_ref.value;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var loadData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:value=value.replaceAll(\" \",\"%20\");_context.next=3;return fetch(\"http://localhost:3000/get-movies?title=\".concat(value));case 3:response=_context.sent;response.json().then(function(res){console.log(res);setData(res);});case 5:case\"end\":return _context.stop();}}},_callee);}));return function loadData(){return _ref2.apply(this,arguments);};}();useEffect(function(){if(value===\"\")return;setData({});loadData();return function(){};},[value]);var suggestMovie=function suggestMovie(id){var btn=document.querySelector(\"#search-movie-\".concat(id,\" button\"));var span=document.querySelector(\"#search-movie-\".concat(id,\" span\"));btn.style.opacity=\"0\";span.style.opacity=\"1\";span.style.transform=\"scale(1)\";setTimeout(function(){btn.style.pointerEvents=\"none\";},500);fetch(\"http://localhost:3000/increment-suggestions?id=\".concat(id));};if(value===\"\")return\"\";if(data.code==21)return/*#__PURE__*/_jsxs(\"div\",{className:\"selectDay-results\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"We can't find any movies matching the title \",/*#__PURE__*/_jsx(\"i\",{children:value}),\".\"]}),/*#__PURE__*/_jsx(\"h4\",{children:\"Though, you can suggest it, so we can add it later!\"}),/*#__PURE__*/_jsx(Button,{text:\"Suggest\"})]});if(data.content){console.log(data.content);}if(data.content)return/*#__PURE__*/_jsxs(\"div\",{className:\"selectDay-results\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Results for \",value]}),/*#__PURE__*/_jsx(\"div\",{className:\"selectDay-list-of-results\",children:data.content.map(function(movie){return/*#__PURE__*/_jsxs(\"div\",{className:\"selectDay-movie\",children:[/*#__PURE__*/_jsx(\"img\",{src:movie.img,alt:\"image-of-\"+movie.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"selectDay-movie-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[movie.title,\" (\",movie.year,\")\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[movie.genre,/*#__PURE__*/_jsx(\"br\",{}),beautifyMinutes(movie.duration)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"searchMovie-willbeplayed\",id:\"search-movie-\".concat(movie.id),children:[movie.dates[0]!==null&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Will be played in:\"}),/*#__PURE__*/_jsx(\"ul\",{children:movie.dates.map(function(date){return/*#__PURE__*/_jsx(\"li\",{children:\"\".concat(date.split('-')[2],\" \").concat(monthNumberToString(date.split('-')[1]))},\"\".concat(movie.title,\"-date-\").concat(date));})})]}),movie.dates[0]===null&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Not scheduled soon.\"}),/*#__PURE__*/_jsx(Button,{text:\"Suggest it!\",event:function event(){suggestMovie(movie.id);}}),/*#__PURE__*/_jsx(\"span\",{children:\"Thank you!\"})]})]})]},\"searched-movie-\"+movie.id);})})]});else return/*#__PURE__*/_jsx(LoadingAnimation,{});};var Timeout;function SearchMovie(){var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),movieValue=_useState4[0],changeMovieValue=_useState4[1];var searchValueHandler=function searchValueHandler(value){clearTimeout(Timeout);Timeout=setTimeout(function(){if(value.trim()!==\"\"){changeMovieValue(value);}},400);};return/*#__PURE__*/_jsxs(\"div\",{className:\"searchMovie section\",children:[/*#__PURE__*/_jsx(HeaderText,{text:\"Search a movie\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Type here the movie title\",onChange:function onChange(e){return searchValueHandler(e.target.value);},type:\"text\"}),/*#__PURE__*/_jsx(Results,{value:movieValue})]});}export default SearchMovie;","map":{"version":3,"sources":["D:/react/remigoo/src/Components/MainPage/SearchMovie/SearchMovie.js"],"names":["ExampleImage","beautifyMinutes","monthNumberToString","Button","LoadingAnimation","useEffect","useState","HeaderText","Results","value","data","setData","loadData","replaceAll","fetch","response","json","then","res","console","log","suggestMovie","id","btn","document","querySelector","span","style","opacity","transform","setTimeout","pointerEvents","code","content","map","movie","img","title","year","genre","duration","dates","date","split","Timeout","SearchMovie","movieValue","changeMovieValue","searchValueHandler","clearTimeout","trim","e","target"],"mappings":"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","sourcesContent":["import \"./SearchMovie.css\";\r\nimport ExampleImage from \"../../../assets/example-movie-image.jpg\";\r\nimport {beautifyMinutes, monthNumberToString} from \"../../../utils/utils\";\r\nimport Button from \"../../Button/Button\";\r\nimport LoadingAnimation from \"../../LoadingAnimation/LoadingAnimation\";\r\nimport {useEffect,useState} from 'react';\r\nimport HeaderText from \"../../HeaderText/HeaderText\";\r\n\r\nconst Results = ({value})=>{\r\n    const [data, setData] = useState({});\r\n    const loadData = async () =>{\r\n        value = value.replaceAll(\" \",\"%20\")\r\n        const response = await fetch(`http://localhost:3000/get-movies?title=${value}`)\r\n        response.json()\r\n            .then(res=>{\r\n                console.log(res)\r\n                setData(res)\r\n            })\r\n    }\r\n\r\n\r\n    useEffect(()=>{\r\n        if(value === \"\")\r\n            return;\r\n\r\n\r\n        setData({})\r\n        loadData();\r\n        return ()=>{};\r\n    },[value])\r\n\r\n\r\n    const suggestMovie = (id) =>{\r\n        let btn = document.querySelector(`#search-movie-${id} button`)\r\n        let span = document.querySelector(`#search-movie-${id} span`)\r\n        btn.style.opacity = \"0\"\r\n        span.style.opacity= \"1\"\r\n        span.style.transform = \"scale(1)\"\r\n\r\n        setTimeout(()=>{\r\n            btn.style.pointerEvents=\"none\"\r\n        },500)\r\n\r\n        fetch(`http://localhost:3000/increment-suggestions?id=${id}`)\r\n    }\r\n\r\n\r\n\r\n    if(value === \"\")\r\n        return \"\"\r\n\r\n\r\n    if(data.code==21)\r\n        return <div className=\"selectDay-results\">\r\n            <h2>We can't find any movies matching the title <i>{value}</i>.</h2>\r\n            <h4>Though, you can suggest it, so we can add it later!</h4>\r\n            <Button text={`Suggest`}/>\r\n    </div>\r\n\r\n    if(data.content){\r\n        console.log(data.content)\r\n\r\n    }\r\n\r\n\r\n    if(data.content)\r\n        return <div className=\"selectDay-results\">\r\n            <h2>Results for {value}</h2>\r\n            <div className=\"selectDay-list-of-results\">\r\n                {\r\n                    data.content.map(movie => <div className=\"selectDay-movie\" key={\"searched-movie-\"+movie.id}>\r\n                        {/*<img src={`data:image/png;base64,${movie.img}`} alt={\"image-of-\"+movie.title}/>*/}\r\n                        <img src={movie.img} alt={\"image-of-\"+movie.title}/>\r\n                        <div className=\"selectDay-movie-info\">\r\n                            <p>{movie.title} ({movie.year})</p>\r\n                            <p>{movie.genre}<br/>{beautifyMinutes(movie.duration)}</p>\r\n                        </div>\r\n\r\n                        <div className=\"searchMovie-willbeplayed\" id={`search-movie-${movie.id}`}>\r\n                            {\r\n                                movie.dates[0] !== null &&\r\n                                    <>\r\n                                        <p>Will be played in:</p>\r\n                                        <ul>\r\n                                            {\r\n                                                movie.dates.map(date => <li key={`${movie.title}-date-${date}`}>{`${date.split('-')[2]} ${monthNumberToString(date.split('-')[1])}`}</li>)\r\n                                            }\r\n                                        </ul>\r\n                                    </>\r\n                            }\r\n                            {\r\n                                movie.dates[0] === null &&\r\n                                    <>\r\n                                        <p>Not scheduled soon.</p>\r\n                                        <Button text=\"Suggest it!\" event={()=>{suggestMovie(movie.id)}}/>\r\n                                        <span>Thank you!</span>\r\n                                    </>\r\n\r\n                            }\r\n                        </div>\r\n                    </div>)\r\n                }\r\n\r\n            </div>\r\n        </div>\r\n\r\n    else\r\n        return <LoadingAnimation/>\r\n}\r\n\r\nvar Timeout;\r\n\r\nfunction SearchMovie() {\r\n    const [movieValue,changeMovieValue] = useState(\"\")\r\n\r\n    const searchValueHandler = (value) =>{\r\n        clearTimeout(Timeout)\r\n        Timeout = setTimeout(()=>{\r\n            if(value.trim() !== \"\"){\r\n                changeMovieValue(value)\r\n            }\r\n        },400)\r\n    }\r\n\r\n    return (\r\n        <div className=\"searchMovie section\">\r\n            <HeaderText text=\"Search a movie\"/>\r\n            <input\r\n                placeholder=\"Type here the movie title\"\r\n                onChange={e=>searchValueHandler(e.target.value)}\r\n                type=\"text\"/>\r\n\r\n            <Results value={movieValue}/>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SearchMovie;\r\n"]},"metadata":{},"sourceType":"module"}